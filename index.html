<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Database for Experiment Dataset • expDB</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Database for Experiment Dataset">
<meta property="og:description" content="A SQLite database is designed to store all information 
  of experiment-based data including metadata, experiment design, 
  managements, phenotypic values and climate records. The dataset can be
  imported from an Excel file.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-4HPNYGL5FT"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4HPNYGL5FT');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">expDB</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/byzheng/expdb/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="expdb">expDB<a class="anchor" aria-label="anchor" href="#expdb"></a>
</h1></div>
<p><img src="https://github.com/byzheng/expDB/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"><a href="https://cran.r-project.org/package=expDB" class="external-link"><img src="http://www.r-pkg.org/badges/version/expDB" alt="CRAN_Status_Badge"></a></p>
<p><a href="https://cran.r-project.org/package=expDB" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/expDB?color=green"></a> <a href="https://cran.r-project.org/package=expDB" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/last-month/expDB?color=green"></a> <a href="https://cran.r-project.org/package=expDB" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/last-week/expDB?color=green"></a></p>
<p>R interface for expDB which is used to store experiment-based data.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from CRAN.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'rapsimng'</span><span class="op">)</span></span></code></pre></div>
<p>Install the developing version from <a href="https://github.com/byzheng/expdb" class="external-link">Github</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'byzheng/expdb'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="database-design">Database design<a class="anchor" aria-label="anchor" href="#database-design"></a>
</h2>
<p>A <a href="https://www.sqlite.org/index.html" class="external-link">SQLite</a> database is used to store all information of experiment-based data.</p>
<ul>
<li><p>Researchers collect the basic information about researchers, e.g. name, email, etc.</p></li>
<li><p>ApSoils specify the soil name in the ApSoils which distribute with <a href="https://www.apsim.info/" class="external-link">APSIM</a>.</p></li>
<li><p>Sites collect the basic information about experiment fields, e.g. name, latitude, longitude, soil, etc. The soil must be the same in the table ApSoils.</p></li>
<li><p>Met specify the information about weather records, e.g. type and filename. The valid met types include “daily” and “hourly”.</p></li>
<li><p>Genotypes collect genotype name and other information.</p></li>
<li><p>Traits collect all information about traits, e.g. name, type, label, unit and description. There aren’t limitation of trait names and types. But we normally use crop and soil as trait types.</p></li>
<li><p>Trials collect basic information about trials, e.g. year, site, trial code (trialcode), sowing, density, depth, row spacing (rowspacing) and researcher and met. Trial code must be unique for expDB. Site should come from table Sites.</p></li>
<li><p>Design specify the design of each plot, e.g. year, trialcode, site, row (range), column (plot), replicate, block, treatment, genotype, etc. Each plot specifies by year, site, row, column which must be unique. The trialcode is from table Trials, site from table Sites, and genotype from table Genotypes.</p></li>
<li><p>TrialSoils collect the soil information to some trials, e.g. trial code, bulk density, no3-n, nh4-n, etc.</p></li>
<li><p>Irrigation collect the irrigation information to some trials, e.g. date, amount, etc.</p></li>
<li><p>Fertilization collect the fertilization information to some trials, e.g. date, fertilizer, amount, etc.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="import-data">Import data<a class="anchor" aria-label="anchor" href="#import-data"></a>
</h2>
<p>The experiment-based data can be imported from a excel file which supports by <a href="https://CRAN.R-project.org/package=readxl" class="external-link">readxl</a> package. expDB is case-insensitive. The Australia style should be used for all date related fields (dd/mm/yyyy).</p>
</div>
<div class="section level2">
<h2 id="traits">Traits<a class="anchor" aria-label="anchor" href="#traits"></a>
</h2>
<p>The processes of plant growth and development can be classified into several hierarchical levels, e.g. biosphere, ecosystem or cropping system, field or plot, whole plant, plant organ, cell, molecule, atom, and subatomic particle (Hodges 1991). We could collect data from field, plant, organ in an agricultural experiment. The values in the higher levels can be derived from lower levels. In most cases, we don’t directly record data in levels above, but through specific protocol. These observations are used to derive values in other levels. For example, population is converted from the establishment counts; dry weights of leaves, stems, and heads are converted from quadrat harvest. An extra level, measurement is added into the convention.</p>
<table class="table">
<thead><tr class="header">
<th>Levels</th>
<th>Prefix</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Field</td>
<td>F_</td>
<td>F_StemNumber</td>
</tr>
<tr class="even">
<td>Plant</td>
<td>P_</td>
<td>P_StemNumber</td>
</tr>
<tr class="odd">
<td>Organ</td>
<td>O_</td>
<td>O_LeafArea</td>
</tr>
<tr class="even">
<td>Measurement</td>
<td>M_</td>
<td>M_DryWeightGreenLeaf</td>
</tr>
</tbody>
</table>
<p>A list of traits are provided in the released version of expDB.</p>
</div>
<div class="section level2">
<h2 id="extraction-of-observations-from-datasets">Extraction of observations from datasets<a class="anchor" aria-label="anchor" href="#extraction-of-observations-from-datasets"></a>
</h2>
<p>The low level function <code>dbGetPhenotype</code> is provided to extract the raw observations from database. Some traits can be observed or calculated from other traits.</p>
<div class="section level3">
<h3 id="population">Population<a class="anchor" aria-label="anchor" href="#population"></a>
</h3>
<p>The plant population (<code>F_Population</code>) is defined as the number of plants in unit area. <code>F_Population</code> is retrived from database, then calculated from measurement establishment count (<code>M_EstablishmentCount</code>) and row spacing (<code>RowSpacing</code>). The density is assumed to equal to population if none of above traits are specified in the database.</p>
</div>
<div class="section level3">
<h3 id="final-leaf-number">Final leaf number<a class="anchor" aria-label="anchor" href="#final-leaf-number"></a>
</h3>
<p>Final leaf number (<code>O_FinalLeafNumber</code>) is defined as the total completed leaf number of a fertile stem after head emergence (main stem and tillers). <code>O_FinalLeafNumber</code> is retrived from database, then calculated from Haun Index. Huan Index is assumed the full expanded flag leaf is recorded. Consequently the maximum integer value in the observations is treated as the <code>O_FinalLeafNumber</code>.</p>
</div>
<div class="section level3">
<h3 id="stemtiller-numbers-for-field-and-plant">Stem/tiller numbers for field and plant<a class="anchor" aria-label="anchor" href="#stemtiller-numbers-for-field-and-plant"></a>
</h3>
<p>The stem/tiller numbers are defined as the number stems/tillers per unit area and per plant. The relationships among 4 traits are as follows.</p>
<p><span class="math display"><em>P</em>_<em>S</em><em>t</em><em>e</em><em>m</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> = <em>P</em>_<em>T</em><em>i</em><em>l</em><em>l</em><em>e</em><em>r</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> + 1</span> <span class="math display"><em>F</em>_<em>S</em><em>t</em><em>e</em><em>m</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> = <em>P</em>_<em>S</em><em>t</em><em>e</em><em>m</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> × <em>F</em>_<em>P</em><em>o</em><em>p</em><em>u</em><em>l</em><em>a</em><em>t</em><em>i</em><em>o</em><em>n</em></span> <span class="math display"><em>F</em>_<em>T</em><em>i</em><em>l</em><em>l</em><em>e</em><em>r</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> = <em>P</em>_<em>T</em><em>i</em><em>l</em><em>l</em><em>e</em><em>r</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> × <em>F</em>_<em>P</em><em>o</em><em>p</em><em>u</em><em>l</em><em>a</em><em>t</em><em>i</em><em>o</em><em>n</em></span> <span class="math display"><em>F</em>_<em>S</em><em>t</em><em>e</em><em>m</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em> = (<em>P</em>_<em>T</em><em>i</em><em>l</em><em>l</em><em>e</em><em>r</em><em>N</em><em>u</em><em>m</em><em>b</em><em>e</em><em>r</em>+1) × <em>F</em>_<em>P</em><em>o</em><em>p</em><em>u</em><em>l</em><em>a</em><em>t</em><em>i</em><em>o</em><em>n</em></span></p>
<p>The stem/tiller numbers are retrived from observations, then calculated by other traits.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=expDB" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/byzheng/expdb/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/byzheng/expdb/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing expDB</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bangyou Zheng <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Bangyou Zheng.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
